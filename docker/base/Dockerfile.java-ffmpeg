# Java + FFmpeg 基础镜像
# 用于需要使用 JavaCV FFmpeg 功能的 Java 应用
FROM eclipse-temurin:21-jre-alpine

LABEL maintainer="侯阳洋"
LABEL description="Java 21 JRE + FFmpeg 基础镜像（包含 JavaCV 所需的 FFmpeg 库）"

# 安装 FFmpeg 及其开发库（JavaCV 通过 JNI 需要这些库）
# ffmpeg: FFmpeg 命令行工具和运行时库
# ffmpeg-dev: FFmpeg 开发库和头文件（JavaCV 需要）
# ffmpeg-libs: FFmpeg 共享库
RUN apk add --no-cache \
    ffmpeg \
    ffmpeg-dev \
    ffmpeg-libs \
    curl \
    && rm -rf /var/cache/apk/*

# 验证安装
RUN ffmpeg -version && java -version